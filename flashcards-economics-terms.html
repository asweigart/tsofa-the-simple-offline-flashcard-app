<!DOCTYPE html>
<html lang="en">
<script>
const version = "1.1.0";

// ===== MODIFY YOUR FLASHCARDS HERE =====
const TOPIC = "Economics Terms";

// Option 1: Array of arrays format
// Economics flashcards
// Copy and paste this into the FLASHCARDS variable in your TSOFA app

let FLASHCARDS = [
    // Fundamental Concepts
    ["<b>Economics</b>", "The study of how society manages its scarce resources"],
    ["<b>Scarcity</b>", "Limited resources to meet unlimited wants"],
    ["<b>Opportunity Cost</b>", "The value of the next best alternative forgone"],
    ["<b>Trade-off</b>", "Giving up one thing to get another"],
    ["<b>Incentive</b>", "Something that motivates or encourages behavior"],
    ["<b>Marginal</b>", "Relating to an additional unit"],
    ["<b>Utility</b>", "Satisfaction or benefit derived from consuming a good"],
    ["<b>Rational Choice</b>", "Decision-making based on maximizing benefit"],
    ["<b>Economic Model</b>", "Simplified representation of economic reality"],
    ["<b>Ceteris Paribus</b>", "All other things being equal"],
    ["<b>Positive Economics</b>", "Objective analysis of what is"],
    ["<b>Normative Economics</b>", "Subjective statements about what ought to be"],
    ["<b>Efficiency</b>", "Maximum output from given inputs"],
    ["<b>Equity</b>", "Fairness in distribution of resources"],
    ["<b>Factors of Production</b>", "Land, labor, capital, and entrepreneurship"],
    ["<b>Capital</b>", "Man-made resources used in production"],
    ["<b>Human Capital</b>", "Knowledge and skills of workers"],
    ["<b>Physical Capital</b>", "Tools, machinery, and buildings"],
    ["<b>Natural Resources</b>", "Materials from nature used in production"],
    ["<b>Entrepreneurship</b>", "Risk-taking and innovation in business"],

    // Microeconomics - Supply and Demand
    ["<b>Microeconomics</b>", "Study of individual economic units"],
    ["<b>Demand</b>", "Quantity consumers are willing to buy at various prices"],
    ["<b>Supply</b>", "Quantity producers are willing to sell at various prices"],
    ["<b>Law of Demand</b>", "Price increases, quantity demanded decreases"],
    ["<b>Law of Supply</b>", "Price increases, quantity supplied increases"],
    ["<b>Equilibrium</b>", "Point where supply equals demand"],
    ["<b>Equilibrium Price</b>", "Price where quantity supplied equals quantity demanded"],
    ["<b>Market Clearing Price</b>", "Another term for equilibrium price"],
    ["<b>Surplus</b>", "Quantity supplied exceeds quantity demanded"],
    ["<b>Shortage</b>", "Quantity demanded exceeds quantity supplied"],
    ["<b>Price Ceiling</b>", "Legal maximum price"],
    ["<b>Price Floor</b>", "Legal minimum price"],
    ["<b>Demand Curve</b>", "Graphical representation of demand schedule"],
    ["<b>Supply Curve</b>", "Graphical representation of supply schedule"],
    ["<b>Movement Along Curve</b>", "Change due to price change"],
    ["<b>Shift of Curve</b>", "Change due to non-price factors"],
    ["<b>Determinants of Demand</b>", "Income, preferences, prices of related goods, expectations, number of buyers"],
    ["<b>Determinants of Supply</b>", "Input costs, technology, expectations, number of sellers"],
    ["<b>Substitute Goods</b>", "Goods that can replace each other"],
    ["<b>Complementary Goods</b>", "Goods used together"],
    ["<b>Normal Good</b>", "Demand increases with income"],
    ["<b>Inferior Good</b>", "Demand decreases with income"],
    ["<b>Giffen Good</b>", "Inferior good where demand increases with price"],
    ["<b>Veblen Good</b>", "Luxury good where demand increases with price"],

    // Elasticity
    ["<b>Elasticity</b>", "Responsiveness of one variable to changes in another"],
    ["<b>Price Elasticity of Demand</b>", "% change in quantity demanded / % change in price"],
    ["<b>Price Elasticity of Supply</b>", "% change in quantity supplied / % change in price"],
    ["<b>Elastic Demand</b>", "Elasticity > 1; responsive to price changes"],
    ["<b>Inelastic Demand</b>", "Elasticity < 1; unresponsive to price changes"],
    ["<b>Unit Elastic</b>", "Elasticity = 1; proportional response"],
    ["<b>Perfectly Elastic</b>", "Infinite elasticity; horizontal demand curve"],
    ["<b>Perfectly Inelastic</b>", "Zero elasticity; vertical demand curve"],
    ["<b>Income Elasticity</b>", "% change in demand / % change in income"],
    ["<b>Cross-Price Elasticity</b>", "% change in demand for X / % change in price of Y"],
    ["<b>Determinants of Elasticity</b>", "Substitutes availability, necessity, time period, budget share"],
    ["<b>Total Revenue Test</b>", "If elastic, price and revenue move oppositely"],
    ["<b>Midpoint Method</b>", "Formula using average values for elasticity"],

    // Consumer Theory
    ["<b>Consumer Surplus</b>", "Difference between willingness to pay and actual price"],
    ["<b>Producer Surplus</b>", "Difference between actual price and willingness to sell"],
    ["<b>Total Surplus</b>", "Consumer surplus + Producer surplus"],
    ["<b>Deadweight Loss</b>", "Loss of economic efficiency"],
    ["<b>Marginal Utility</b>", "Additional satisfaction from one more unit"],
    ["<b>Diminishing Marginal Utility</b>", "Each additional unit provides less satisfaction"],
    ["<b>Budget Constraint</b>", "Limit on consumption based on income"],
    ["<b>Indifference Curve</b>", "Combinations providing equal satisfaction"],
    ["<b>Marginal Rate of Substitution</b>", "Rate of trading one good for another"],
    ["<b>Income Effect</b>", "Change in consumption due to change in purchasing power"],
    ["<b>Substitution Effect</b>", "Change in consumption due to relative price change"],
    ["<b>Consumer Equilibrium</b>", "Point where consumer maximizes utility"],
    ["<b>Revealed Preference</b>", "Preferences shown through choices"],
    ["<b>Behavioral Economics</b>", "Psychology in economic decision-making"],

    // Production and Costs
    ["<b>Production Function</b>", "Relationship between inputs and output"],
    ["<b>Short Run</b>", "Period where at least one input is fixed"],
    ["<b>Long Run</b>", "Period where all inputs are variable"],
    ["<b>Total Product</b>", "Total output produced"],
    ["<b>Average Product</b>", "Output per unit of input"],
    ["<b>Marginal Product</b>", "Additional output from one more input unit"],
    ["<b>Law of Diminishing Returns</b>", "Eventually, marginal product decreases"],
    ["<b>Returns to Scale</b>", "Output change when all inputs change proportionally"],
    ["<b>Increasing Returns to Scale</b>", "Output increases more than proportionally"],
    ["<b>Constant Returns to Scale</b>", "Output increases proportionally"],
    ["<b>Decreasing Returns to Scale</b>", "Output increases less than proportionally"],
    ["<b>Fixed Costs</b>", "Costs that don't vary with output"],
    ["<b>Variable Costs</b>", "Costs that vary with output"],
    ["<b>Total Cost</b>", "Fixed costs + Variable costs"],
    ["<b>Average Total Cost</b>", "Total cost / Quantity"],
    ["<b>Average Fixed Cost</b>", "Fixed cost / Quantity"],
    ["<b>Average Variable Cost</b>", "Variable cost / Quantity"],
    ["<b>Marginal Cost</b>", "Cost of producing one additional unit"],
    ["<b>Economies of Scale</b>", "Cost advantages from increased production"],
    ["<b>Diseconomies of Scale</b>", "Cost disadvantages from excessive size"],
    ["<b>Minimum Efficient Scale</b>", "Smallest output where long-run average cost is minimized"],
    ["<b>Sunk Cost</b>", "Cost that cannot be recovered"],
    ["<b>Economic Cost</b>", "Explicit costs + Implicit costs"],
    ["<b>Accounting Cost</b>", "Explicit monetary costs only"],
    ["<b>Implicit Cost</b>", "Opportunity cost of using owned resources"],
    ["<b>Economic Profit</b>", "Total revenue - Economic costs"],
    ["<b>Accounting Profit</b>", "Total revenue - Accounting costs"],
    ["<b>Normal Profit</b>", "Zero economic profit; covering opportunity costs"],

    // Market Structures
    ["<b>Perfect Competition</b>", "Many sellers, identical products, no barriers"],
    ["<b>Monopoly</b>", "Single seller, unique product, high barriers"],
    ["<b>Oligopoly</b>", "Few sellers, similar products, some barriers"],
    ["<b>Monopolistic Competition</b>", "Many sellers, differentiated products, low barriers"],
    ["<b>Market Power</b>", "Ability to influence market price"],
    ["<b>Price Taker</b>", "Firm that accepts market price"],
    ["<b>Price Maker</b>", "Firm that can set its price"],
    ["<b>Barriers to Entry</b>", "Obstacles preventing new firms from entering"],
    ["<b>Natural Monopoly</b>", "Single firm can supply entire market at lowest cost"],
    ["<b>Product Differentiation</b>", "Making products distinct from competitors"],
    ["<b>Profit Maximization</b>", "Producing where MR = MC"],
    ["<b>Shutdown Point</b>", "Price below average variable cost"],
    ["<b>Break-even Point</b>", "Zero economic profit"],
    ["<b>Contestable Market</b>", "Market with low barriers and potential competition"],
    ["<b>Concentration Ratio</b>", "Market share of largest firms"],
    ["<b>Herfindahl Index</b>", "Sum of squared market shares"],

    // Game Theory and Strategic Behavior
    ["<b>Game Theory</b>", "Study of strategic decision-making"],
    ["<b>Nash Equilibrium</b>", "No player can benefit by changing strategy alone"],
    ["<b>Dominant Strategy</b>", "Best strategy regardless of others' actions"],
    ["<b>Prisoner's Dilemma</b>", "Game where individual rationality leads to collective irrationality"],
    ["<b>Zero-Sum Game</b>", "One's gain equals another's loss"],
    ["<b>Positive-Sum Game</b>", "All players can gain"],
    ["<b>Collusion</b>", "Firms cooperating to restrict competition"],
    ["<b>Cartel</b>", "Formal collusive agreement"],
    ["<b>Price Leadership</b>", "One firm sets price, others follow"],
    ["<b>Predatory Pricing</b>", "Below-cost pricing to eliminate competitors"],
    ["<b>Price Discrimination</b>", "Charging different prices to different consumers"],
    ["<b>First-Degree Price Discrimination</b>", "Perfect price discrimination; charging maximum willingness to pay"],
    ["<b>Second-Degree Price Discrimination</b>", "Quantity discounts"],
    ["<b>Third-Degree Price Discrimination</b>", "Different prices for different groups"],

    // Market Failures
    ["<b>Market Failure</b>", "Market fails to allocate resources efficiently"],
    ["<b>Externality</b>", "Cost or benefit affecting third parties"],
    ["<b>Negative Externality</b>", "External cost (e.g., pollution)"],
    ["<b>Positive Externality</b>", "External benefit (e.g., education)"],
    ["<b>Public Good</b>", "Non-rival and non-excludable"],
    ["<b>Private Good</b>", "Rival and excludable"],
    ["<b>Common Resource</b>", "Rival but non-excludable"],
    ["<b>Club Good</b>", "Non-rival but excludable"],
    ["<b>Free Rider Problem</b>", "Using goods without paying"],
    ["<b>Tragedy of the Commons</b>", "Overuse of common resources"],
    ["<b>Asymmetric Information</b>", "Unequal information between parties"],
    ["<b>Adverse Selection</b>", "Hidden information before transaction"],
    ["<b>Moral Hazard</b>", "Hidden action after transaction"],
    ["<b>Principal-Agent Problem</b>", "Conflict between owner and manager interests"],
    ["<b>Signaling</b>", "Credible communication of private information"],
    ["<b>Screening</b>", "Inducing information revelation"],
    ["<b>Coase Theorem</b>", "Private bargaining can solve externalities"],
    ["<b>Pigouvian Tax</b>", "Tax equal to external cost"],
    ["<b>Subsidy</b>", "Payment to encourage activity"],

    // Labor Economics
    ["<b>Labor Force</b>", "Employed plus unemployed seeking work"],
    ["<b>Labor Force Participation Rate</b>", "Labor force / Working-age population"],
    ["<b>Unemployment Rate</b>", "Unemployed / Labor force"],
    ["<b>Employment Rate</b>", "Employed / Working-age population"],
    ["<b>Frictional Unemployment</b>", "Short-term job searching"],
    ["<b>Structural Unemployment</b>", "Mismatch between skills and jobs"],
    ["<b>Cyclical Unemployment</b>", "Due to economic downturns"],
    ["<b>Natural Rate of Unemployment</b>", "Frictional + Structural unemployment"],
    ["<b>Full Employment</b>", "Only natural unemployment exists"],
    ["<b>Wage</b>", "Price of labor"],
    ["<b>Minimum Wage</b>", "Legal minimum hourly payment"],
    ["<b>Efficiency Wage</b>", "Above-market wage to increase productivity"],
    ["<b>Compensating Differential</b>", "Wage difference for job characteristics"],
    ["<b>Human Capital Theory</b>", "Education/training increases productivity"],
    ["<b>Marginal Revenue Product</b>", "Additional revenue from one more worker"],
    ["<b>Derived Demand</b>", "Demand for inputs based on output demand"],
    ["<b>Monopsony</b>", "Single buyer in labor market"],
    ["<b>Labor Union</b>", "Organization representing workers"],
    ["<b>Collective Bargaining</b>", "Union negotiation with employers"],
    ["<b>Strike</b>", "Work stoppage by employees"],
    ["<b>Discrimination</b>", "Different treatment based on non-economic factors"],
    ["<b>Glass Ceiling</b>", "Invisible barrier to advancement"],
    ["<b>Gender Wage Gap</b>", "Difference in average earnings by gender"],

    // Macroeconomics - National Accounts
    ["<b>Macroeconomics</b>", "Study of the economy as a whole"],
    ["<b>Gross Domestic Product (GDP)</b>", "Total value of goods and services produced"],
    ["<b>Nominal GDP</b>", "GDP at current prices"],
    ["<b>Real GDP</b>", "GDP adjusted for inflation"],
    ["<b>GDP Deflator</b>", "Price index measuring inflation"],
    ["<b>GDP Per Capita</b>", "GDP divided by population"],
    ["<b>Gross National Product (GNP)</b>", "GDP plus net income from abroad"],
    ["<b>Net Domestic Product</b>", "GDP minus depreciation"],
    ["<b>National Income</b>", "Total income earned by factors of production"],
    ["<b>Personal Income</b>", "Income received by individuals"],
    ["<b>Disposable Income</b>", "Personal income minus taxes"],
    ["<b>Consumption</b>", "Spending on goods and services"],
    ["<b>Investment</b>", "Spending on capital goods"],
    ["<b>Government Spending</b>", "Public sector purchases"],
    ["<b>Net Exports</b>", "Exports minus imports"],
    ["<b>Aggregate Demand</b>", "Total demand for goods and services"],
    ["<b>Aggregate Supply</b>", "Total supply of goods and services"],
    ["<b>Output Gap</b>", "Difference between actual and potential GDP"],
    ["<b>Potential GDP</b>", "Maximum sustainable output"],

    // Money and Banking
    ["<b>Money</b>", "Medium of exchange, unit of account, store of value"],
    ["<b>Currency</b>", "Physical money (coins and bills)"],
    ["<b>M1 Money Supply</b>", "Currency + Checkable deposits"],
    ["<b>M2 Money Supply</b>", "M1 + Savings deposits + Money market funds"],
    ["<b>Liquidity</b>", "Ease of converting to cash"],
    ["<b>Fiat Money</b>", "Money with no intrinsic value"],
    ["<b>Commodity Money</b>", "Money with intrinsic value"],
    ["<b>Central Bank</b>", "Institution managing money supply"],
    ["<b>Federal Reserve</b>", "U.S. central bank"],
    ["<b>Commercial Bank</b>", "Institution accepting deposits and making loans"],
    ["<b>Reserve Requirement</b>", "Minimum reserves banks must hold"],
    ["<b>Excess Reserves</b>", "Reserves above requirement"],
    ["<b>Money Multiplier</b>", "1 / Reserve requirement ratio"],
    ["<b>Fractional Reserve Banking</b>", "Banks lend out portion of deposits"],
    ["<b>Bank Run</b>", "Mass withdrawal of deposits"],
    ["<b>FDIC Insurance</b>", "Federal deposit insurance"],
    ["<b>Interest Rate</b>", "Cost of borrowing money"],
    ["<b>Nominal Interest Rate</b>", "Stated interest rate"],
    ["<b>Real Interest Rate</b>", "Nominal rate minus inflation"],
    ["<b>Prime Rate</b>", "Rate for best customers"],
    ["<b>Federal Funds Rate</b>", "Rate banks charge each other"],
    ["<b>Discount Rate</b>", "Rate Fed charges banks"],
    ["<b>Yield</b>", "Return on investment"],
    ["<b>Bond</b>", "Debt security"],
    ["<b>Stock</b>", "Ownership share"],

    // Monetary Policy
    ["<b>Monetary Policy</b>", "Central bank actions affecting money supply"],
    ["<b>Expansionary Monetary Policy</b>", "Increasing money supply"],
    ["<b>Contractionary Monetary Policy</b>", "Decreasing money supply"],
    ["<b>Open Market Operations</b>", "Buying/selling government securities"],
    ["<b>Quantitative Easing</b>", "Large-scale asset purchases"],
    ["<b>Forward Guidance</b>", "Communication about future policy"],
    ["<b>Taylor Rule</b>", "Formula for setting interest rates"],
    ["<b>Inflation Targeting</b>", "Policy focused on price stability"],
    ["<b>Dual Mandate</b>", "Price stability and full employment"],
    ["<b>Monetary Base</b>", "Currency + Bank reserves"],
    ["<b>Velocity of Money</b>", "Rate money changes hands"],
    ["<b>Quantity Theory of Money</b>", "MV = PY"],
    ["<b>Liquidity Trap</b>", "Monetary policy ineffective at zero rates"],
    ["<b>Zero Lower Bound</b>", "Nominal rates can't go below zero"],

    // Inflation
    ["<b>Inflation</b>", "General price level increase"],
    ["<b>Deflation</b>", "General price level decrease"],
    ["<b>Disinflation</b>", "Decreasing inflation rate"],
    ["<b>Hyperinflation</b>", "Extremely high inflation"],
    ["<b>Stagflation</b>", "Inflation with stagnant growth"],
    ["<b>Consumer Price Index (CPI)</b>", "Measure of consumer prices"],
    ["<b>Producer Price Index (PPI)</b>", "Measure of wholesale prices"],
    ["<b>Core Inflation</b>", "Excluding food and energy"],
    ["<b>Cost-Push Inflation</b>", "Rising costs cause inflation"],
    ["<b>Demand-Pull Inflation</b>", "Excess demand causes inflation"],
    ["<b>Wage-Price Spiral</b>", "Wages and prices reinforcing each other"],
    ["<b>Inflation Expectations</b>", "Anticipated future inflation"],
    ["<b>Menu Costs</b>", "Costs of changing prices"],
    ["<b>Shoe Leather Costs</b>", "Costs of reducing money holdings"],
    ["<b>Bracket Creep</b>", "Inflation pushing into higher tax brackets"],
    ["<b>Fisher Effect</b>", "Nominal rate = Real rate + Inflation"],
    ["<b>Phillips Curve</b>", "Trade-off between inflation and unemployment"],
    ["<b>NAIRU</b>", "Non-accelerating inflation rate of unemployment"],

    // Fiscal Policy
    ["<b>Fiscal Policy</b>", "Government spending and taxation"],
    ["<b>Expansionary Fiscal Policy</b>", "Increasing spending or cutting taxes"],
    ["<b>Contractionary Fiscal Policy</b>", "Decreasing spending or raising taxes"],
    ["<b>Budget Deficit</b>", "Spending exceeds revenue"],
    ["<b>Budget Surplus</b>", "Revenue exceeds spending"],
    ["<b>Balanced Budget</b>", "Revenue equals spending"],
    ["<b>National Debt</b>", "Accumulated deficits"],
    ["<b>Debt-to-GDP Ratio</b>", "Debt relative to economic size"],
    ["<b>Crowding Out</b>", "Government borrowing reducing private investment"],
    ["<b>Ricardian Equivalence</b>", "Consumers save for future taxes"],
    ["<b>Automatic Stabilizers</b>", "Taxes and transfers that adjust automatically"],
    ["<b>Discretionary Fiscal Policy</b>", "Deliberate policy changes"],
    ["<b>Multiplier Effect</b>", "Initial spending creates larger impact"],
    ["<b>Marginal Propensity to Consume</b>", "Fraction of extra income spent"],
    ["<b>Marginal Propensity to Save</b>", "Fraction of extra income saved"],
    ["<b>Tax Incidence</b>", "Who bears the tax burden"],
    ["<b>Progressive Tax</b>", "Higher rates for higher incomes"],
    ["<b>Regressive Tax</b>", "Higher burden on lower incomes"],
    ["<b>Proportional Tax</b>", "Same rate for all incomes"],
    ["<b>Laffer Curve</b>", "Relationship between tax rates and revenue"],

    // Economic Growth
    ["<b>Economic Growth</b>", "Increase in real GDP over time"],
    ["<b>Growth Rate</b>", "Percentage change in GDP"],
    ["<b>Rule of 70</b>", "Years to double = 70/growth rate"],
    ["<b>Productivity</b>", "Output per unit of input"],
    ["<b>Labor Productivity</b>", "Output per worker"],
    ["<b>Total Factor Productivity</b>", "Efficiency in using all inputs"],
    ["<b>Solow Growth Model</b>", "Model of long-run growth"],
    ["<b>Steady State</b>", "Long-run equilibrium in growth model"],
    ["<b>Convergence</b>", "Poor countries growing faster"],
    ["<b>Human Capital (Growth)</b>", "Education and skills affecting growth"],
    ["<b>Physical Capital (Growth)</b>", "Machinery and infrastructure"],
    ["<b>Technological Progress</b>", "Innovation driving growth"],
    ["<b>Research and Development</b>", "Investment in innovation"],
    ["<b>Creative Destruction</b>", "Innovation replacing old methods"],
    ["<b>Institutions</b>", "Rules and organizations affecting economy"],
    ["<b>Property Rights</b>", "Legal ownership protection"],
    ["<b>Rule of Law</b>", "Fair and predictable legal system"],
    ["<b>Infrastructure</b>", "Basic physical systems"],
    ["<b>Demographic Transition</b>", "Population changes with development"],

    // Business Cycles
    ["<b>Business Cycle</b>", "Fluctuations in economic activity"],
    ["<b>Expansion</b>", "Period of economic growth"],
    ["<b>Peak</b>", "High point of business cycle"],
    ["<b>Contraction</b>", "Period of economic decline"],
    ["<b>Trough</b>", "Low point of business cycle"],
    ["<b>Recession</b>", "Two consecutive quarters of negative growth"],
    ["<b>Depression</b>", "Severe and prolonged recession"],
    ["<b>Recovery</b>", "Return to growth after recession"],
    ["<b>Leading Indicators</b>", "Predict future economic activity"],
    ["<b>Lagging Indicators</b>", "Confirm past economic activity"],
    ["<b>Coincident Indicators</b>", "Move with current economy"],
    ["<b>Procyclical</b>", "Moves with business cycle"],
    ["<b>Countercyclical</b>", "Moves against business cycle"],
    ["<b>Acyclical</b>", "No relation to business cycle"],
    ["<b>Output Volatility</b>", "Fluctuations in production"],
    ["<b>Consumption Smoothing</b>", "Stable consumption over time"],
    ["<b>Investment Volatility</b>", "Large fluctuations in investment"],
    ["<b>Inventory Cycle</b>", "Fluctuations in stock levels"],
    ["<b>Credit Cycle</b>", "Expansion and contraction of credit"],

    // International Trade
    ["<b>International Trade</b>", "Exchange between countries"],
    ["<b>Exports</b>", "Goods sold to other countries"],
    ["<b>Imports</b>", "Goods bought from other countries"],
    ["<b>Trade Balance</b>", "Exports minus imports"],
    ["<b>Trade Surplus</b>", "Exports exceed imports"],
    ["<b>Trade Deficit</b>", "Imports exceed exports"],
    ["<b>Current Account</b>", "Trade balance + Income flows"],
    ["<b>Capital Account</b>", "Financial asset flows"],
    ["<b>Balance of Payments</b>", "All international transactions"],
    ["<b>Comparative Advantage</b>", "Lower opportunity cost in production"],
    ["<b>Absolute Advantage</b>", "More efficient production"],
    ["<b>Terms of Trade</b>", "Export prices / Import prices"],
    ["<b>Gains from Trade</b>", "Benefits from specialization and exchange"],
    ["<b>Trade Barriers</b>", "Restrictions on international trade"],
    ["<b>Tariff</b>", "Tax on imports"],
    ["<b>Quota</b>", "Quantity limit on imports"],
    ["<b>Embargo</b>", "Complete trade ban"],
    ["<b>Subsidy (Trade)</b>", "Government support for exports"],
    ["<b>Dumping</b>", "Selling below cost in foreign markets"],
    ["<b>Free Trade</b>", "No barriers to trade"],
    ["<b>Protectionism</b>", "Policies restricting imports"],
    ["<b>Trade Agreement</b>", "Treaty reducing trade barriers"],
    ["<b>World Trade Organization (WTO)</b>", "International trade regulation body"],
    ["<b>NAFTA/USMCA</b>", "North American trade agreement"],
    ["<b>European Union (EU)</b>", "European economic integration"],
    ["<b>Globalization</b>", "Increasing international integration"],

    // Exchange Rates
    ["<b>Exchange Rate</b>", "Price of one currency in another"],
    ["<b>Appreciation</b>", "Currency value increase"],
    ["<b>Depreciation</b>", "Currency value decrease"],
    ["<b>Floating Exchange Rate</b>", "Market-determined rate"],
    ["<b>Fixed Exchange Rate</b>", "Government-set rate"],
    ["<b>Managed Float</b>", "Occasional government intervention"],
    ["<b>Devaluation</b>", "Official reduction in fixed rate"],
    ["<b>Revaluation</b>", "Official increase in fixed rate"],
    ["<b>Foreign Exchange Market</b>", "Market for currency trading"],
    ["<b>Spot Rate</b>", "Current exchange rate"],
    ["<b>Forward Rate</b>", "Future exchange rate"],
    ["<b>Currency Arbitrage</b>", "Profiting from rate differences"],
    ["<b>Purchasing Power Parity</b>", "Exchange rates equalizing prices"],
    ["<b>Big Mac Index</b>", "Informal PPP measure"],
    ["<b>Real Exchange Rate</b>", "Nominal rate adjusted for prices"],
    ["<b>Currency Crisis</b>", "Rapid depreciation"],
    ["<b>Capital Flight</b>", "Large outflow of financial assets"],
    ["<b>Foreign Reserves</b>", "Central bank foreign currency holdings"],
    ["<b>Bretton Woods</b>", "Post-WWII fixed rate system"],
    ["<b>Gold Standard</b>", "Currency backed by gold"],

    // Financial Markets
    ["<b>Financial Market</b>", "Market for financial assets"],
    ["<b>Capital Market</b>", "Long-term securities market"],
    ["<b>Money Market</b>", "Short-term debt market"],
    ["<b>Primary Market</b>", "New securities issuance"],
    ["<b>Secondary Market</b>", "Existing securities trading"],
    ["<b>Stock Market</b>", "Equity trading market"],
    ["<b>Bond Market</b>", "Debt securities market"],
    ["<b>Derivatives Market</b>", "Market for financial contracts"],
    ["<b>Foreign Exchange Market (Forex)</b>", "Currency trading market"],
    ["<b>Commodity Market</b>", "Raw materials trading"],
    ["<b>IPO (Initial Public Offering)</b>", "First stock sale to public"],
    ["<b>Market Capitalization</b>", "Total value of company's shares"],
    ["<b>Dividend</b>", "Payment to shareholders"],
    ["<b>Capital Gain</b>", "Profit from asset sale"],
    ["<b>Yield Curve</b>", "Interest rates across maturities"],
    ["<b>Risk Premium</b>", "Extra return for risk"],
    ["<b>Default Risk</b>", "Risk of non-payment"],
    ["<b>Credit Rating</b>", "Assessment of creditworthiness"],
    ["<b>Leverage</b>", "Using borrowed funds"],
    ["<b>Margin</b>", "Borrowing to buy securities"],
    ["<b>Short Selling</b>", "Selling borrowed securities"],
    ["<b>Hedge</b>", "Protection against risk"],
    ["<b>Speculation</b>", "Risky investment for profit"],
    ["<b>Portfolio</b>", "Collection of investments"],
    ["<b>Diversification</b>", "Spreading risk across assets"],
    ["<b>Systematic Risk</b>", "Market-wide risk"],
    ["<b>Unsystematic Risk</b>", "Firm-specific risk"],
    ["<b>Beta</b>", "Measure of systematic risk"],
    ["<b>Alpha</b>", "Excess return over benchmark"],
    ["<b>Efficient Market Hypothesis</b>", "Prices reflect all information"],
    ["<b>Behavioral Finance</b>", "Psychology in financial decisions"],
    ["<b>Bubble</b>", "Asset prices exceed fundamental value"],
    ["<b>Market Crash</b>", "Rapid market decline"],
    ["<b>Bull Market</b>", "Rising market"],
    ["<b>Bear Market</b>", "Falling market"],
    ["<b>Volatility</b>", "Price fluctuation magnitude"],
    ["<b>Liquidity (Finance)</b>", "Ease of buying/selling without price impact"],

    // Financial Instruments
    ["<b>Equity</b>", "Ownership stake"],
    ["<b>Debt Security</b>", "Loan instrument"],
    ["<b>Common Stock</b>", "Basic ownership shares"],
    ["<b>Preferred Stock</b>", "Priority shares with fixed dividend"],
    ["<b>Corporate Bond</b>", "Company debt security"],
    ["<b>Government Bond</b>", "Government debt security"],
    ["<b>Municipal Bond</b>", "Local government debt"],
    ["<b>Treasury Bill</b>", "Short-term government security"],
    ["<b>Treasury Note</b>", "Medium-term government security"],
    ["<b>Treasury Bond</b>", "Long-term government security"],
    ["<b>Zero-Coupon Bond</b>", "Bond sold at discount"],
    ["<b>Convertible Bond</b>", "Bond convertible to stock"],
    ["<b>Junk Bond</b>", "High-risk, high-yield bond"],
    ["<b>Commercial Paper</b>", "Short-term corporate debt"],
    ["<b>Certificate of Deposit (CD)</b>", "Time deposit"],
    ["<b>Money Market Fund</b>", "Short-term securities fund"],
    ["<b>Mutual Fund</b>", "Pooled investment fund"],
    ["<b>Exchange-Traded Fund (ETF)</b>", "Tradable investment fund"],
    ["<b>Index Fund</b>", "Fund tracking market index"],
    ["<b>Hedge Fund</b>", "Private investment fund"],
    ["<b>Private Equity</b>", "Non-public company investment"],
    ["<b>Venture Capital</b>", "Startup investment"],
    ["<b>Option</b>", "Right to buy/sell at set price"],
    ["<b>Call Option</b>", "Right to buy"],
    ["<b>Put Option</b>", "Right to sell"],
    ["<b>Strike Price</b>", "Option exercise price"],
    ["<b>Future</b>", "Obligation to buy/sell"],
    ["<b>Forward Contract</b>", "Customized future"],
    ["<b>Swap</b>", "Exchange of cash flows"],
    ["<b>Collateralized Debt Obligation (CDO)</b>", "Structured debt product"],
    ["<b>Mortgage-Backed Security (MBS)</b>", "Security backed by mortgages"],
    ["<b>Asset-Backed Security</b>", "Security backed by assets"],

    // Economic Systems and Development
    ["<b>Capitalism</b>", "Private ownership market economy"],
    ["<b>Socialism</b>", "Collective ownership economy"],
    ["<b>Mixed Economy</b>", "Combination of market and planning"],
    ["<b>Command Economy</b>", "Central planning system"],
    ["<b>Market Economy</b>", "Decentralized decision-making"],
    ["<b>Traditional Economy</b>", "Custom-based system"],
    ["<b>Planned Economy</b>", "Government-directed economy"],
    ["<b>Laissez-faire</b>", "Minimal government intervention"],
    ["<b>Welfare State</b>", "Government social protection"],
    ["<b>Privatization</b>", "Transfer to private ownership"],
    ["<b>Nationalization</b>", "Transfer to public ownership"],
    ["<b>Deregulation</b>", "Removing government rules"],
    ["<b>Liberalization</b>", "Reducing government restrictions"],
    ["<b>Industrial Policy</b>", "Government support for industries"],
    ["<b>Import Substitution</b>", "Domestic production replacing imports"],
    ["<b>Export-Led Growth</b>", "Growth through exports"],
    ["<b>Structural Adjustment</b>", "Economic reform programs"],
    ["<b>Washington Consensus</b>", "Free-market reform package"],
    ["<b>Development Economics</b>", "Study of economic development"],
    ["<b>Economic Development</b>", "Improvement in living standards"],
    ["<b>Developing Country</b>", "Lower income nation"],
    ["<b>Emerging Market</b>", "Rapidly growing developing economy"],
    ["<b>Least Developed Country</b>", "Poorest nations"],
    ["<b>Middle Income Trap</b>", "Stagnation at middle income"],
    ["<b>Poverty Line</b>", "Minimum income level"],
    ["<b>Absolute Poverty</b>", "Below subsistence level"],
    ["<b>Relative Poverty</b>", "Below societal standards"],
    ["<b>Income Inequality</b>", "Uneven income distribution"],
    ["<b>Gini Coefficient</b>", "Inequality measure (0-1)"],
    ["<b>Lorenz Curve</b>", "Graphical inequality representation"],
    ["<b>Human Development Index</b>", "Broader development measure"],
    ["<b>Sustainable Development</b>", "Meeting needs without compromising future"],
    ["<b>Foreign Aid</b>", "International assistance"],
    ["<b>Foreign Direct Investment</b>", "Cross-border business investment"],
    ["<b>Remittances</b>", "Money sent home by migrants"],
    ["<b>Brain Drain</b>", "Skilled worker emigration"],
    ["<b>Dutch Disease</b>", "Resource exports harming other sectors"],
    ["<b>Resource Curse</b>", "Natural resources hindering development"],
    ["<b>Infant Industry</b>", "New industry needing protection"],

    // Behavioral Economics
    ["<b>Behavioral Economics (Field)</b>", "Psychology in economic decisions"],
    ["<b>Bounded Rationality</b>", "Limited cognitive abilities"],
    ["<b>Heuristics</b>", "Mental shortcuts"],
    ["<b>Cognitive Bias</b>", "Systematic thinking error"],
    ["<b>Anchoring Bias</b>", "Over-relying on first information"],
    ["<b>Availability Heuristic</b>", "Overweighting easily recalled"],
    ["<b>Confirmation Bias</b>", "Seeking supporting information"],
    ["<b>Loss Aversion</b>", "Losses hurt more than gains please"],
    ["<b>Endowment Effect</b>", "Overvaluing what we own"],
    ["<b>Sunk Cost Fallacy</b>", "Considering irrelevant past costs"],
    ["<b>Mental Accounting</b>", "Treating money differently by source"],
    ["<b>Framing Effect</b>", "Decisions affected by presentation"],
    ["<b>Status Quo Bias</b>", "Preference for current state"],
    ["<b>Present Bias</b>", "Overvaluing immediate rewards"],
    ["<b>Hyperbolic Discounting</b>", "Inconsistent time preferences"],
    ["<b>Overconfidence Bias</b>", "Overestimating abilities"],
    ["<b>Hindsight Bias</b>", "Seeing past as predictable"],
    ["<b>Herding Behavior</b>", "Following the crowd"],
    ["<b>Nudge</b>", "Choice architecture influence"],
    ["<b>Choice Architecture</b>", "Designing decision contexts"],
    ["<b>Default Option</b>", "Pre-selected choice"],
    ["<b>Prospect Theory</b>", "Decision-making under uncertainty"],
    ["<b>Reference Point</b>", "Baseline for comparisons"],
    ["<b>Diminishing Sensitivity</b>", "Decreasing marginal impact"],

    // Environmental Economics
    ["<b>Environmental Economics</b>", "Economics of environmental issues"],
    ["<b>Natural Capital</b>", "Environmental resources"],
    ["<b>Ecosystem Services</b>", "Benefits from nature"],
    ["<b>Sustainability</b>", "Meeting needs without depleting resources"],
    ["<b>Carbon Tax</b>", "Tax on carbon emissions"],
    ["<b>Cap and Trade</b>", "Emissions trading system"],
    ["<b>Carbon Credit</b>", "Permit to emit carbon"],
    ["<b>Green Economy</b>", "Environmentally sustainable economy"],
    ["<b>Circular Economy</b>", "Reuse and recycling system"],
    ["<b>Renewable Resources</b>", "Replenishable resources"],
    ["<b>Non-renewable Resources</b>", "Finite resources"],
    ["<b>Resource Depletion</b>", "Using up natural resources"],
    ["<b>Environmental Externality</b>", "Environmental cost/benefit to others"],
    ["<b>Pollution</b>", "Environmental contamination"],
    ["<b>Climate Change Economics</b>", "Economic impacts of climate change"],
    ["<b>Carbon Footprint</b>", "Total greenhouse gas emissions"],
    ["<b>Green GDP</b>", "GDP minus environmental costs"],
    ["<b>Environmental Regulation</b>", "Rules protecting environment"],
    ["<b>Cost-Benefit Analysis (Environmental)</b>", "Comparing environmental costs and benefits"],
    ["<b>Contingent Valuation</b>", "Valuing non-market environmental goods"],
    ["<b>Hedonic Pricing</b>", "Inferring environmental values from prices"],
    ["<b>Travel Cost Method</b>", "Valuing sites by visit costs"],

    // Public Economics
    ["<b>Public Economics</b>", "Study of government economic role"],
    ["<b>Public Finance</b>", "Government revenue and spending"],
    ["<b>Public Choice Theory</b>", "Economic analysis of politics"],
    ["<b>Government Failure</b>", "Inefficient government intervention"],
    ["<b>Rent-Seeking</b>", "Seeking economic gain through politics"],
    ["<b>Regulatory Capture</b>", "Regulators serving industry interests"],
    ["<b>Tax Revenue</b>", "Government income from taxes"],
    ["<b>Tax Base</b>", "What is subject to tax"],
    ["<b>Tax Rate</b>", "Percentage applied to tax base"],
    ["<b>Marginal Tax Rate</b>", "Tax on additional income"],
    ["<b>Average Tax Rate</b>", "Total tax / Total income"],
    ["<b>Tax Bracket</b>", "Income range with specific rate"],
    ["<b>Tax Credit</b>", "Direct reduction in tax owed"],
    ["<b>Tax Deduction</b>", "Reduction in taxable income"],
    ["<b>Tax Exemption</b>", "Income not subject to tax"],
    ["<b>Tax Evasion</b>", "Illegal tax avoidance"],
    ["<b>Tax Avoidance</b>", "Legal tax minimization"],
    ["<b>Tax Haven</b>", "Low-tax jurisdiction"],
    ["<b>Transfer Payment</b>", "Government payment without service"],
    ["<b>Entitlement Program</b>", "Guaranteed benefit program"],
    ["<b>Social Security</b>", "Retirement and disability program"],
    ["<b>Medicare</b>", "Health insurance for elderly"],
    ["<b>Medicaid</b>", "Health insurance for poor"],
    ["<b>Unemployment Insurance</b>", "Benefits for unemployed"],
    ["<b>Welfare</b>", "Government assistance programs"],
    ["<b>Universal Basic Income</b>", "Unconditional regular payment"],
    ["<b>Means Testing</b>", "Benefits based on income/assets"],
    ["<b>Public Goods Provision</b>", "Government supplying public goods"],
    ["<b>User Fee</b>", "Charge for public service"],
    ["<b>Congestion Pricing</b>", "Charge for using busy resources"],

    // Economic History and Thought
    ["<b>Classical Economics</b>", "Smith, Ricardo school of thought"],
    ["<b>Neoclassical Economics</b>", "Marginalist revolution school"],
    ["<b>Keynesian Economics</b>", "Keynes's macroeconomic theory"],
    ["<b>Monetarism</b>", "Friedman's monetary focus"],
    ["<b>Austrian School</b>", "Mises, Hayek tradition"],
    ["<b>Chicago School</b>", "Free-market oriented school"],
    ["<b>Institutional Economics</b>", "Focus on institutions"],
    ["<b>New Keynesian</b>", "Modern Keynesian with micro foundations"],
    ["<b>New Classical</b>", "Rational expectations school"],
    ["<b>Supply-Side Economics</b>", "Focus on production incentives"],
    ["<b>Trickle-Down Economics</b>", "Benefits to wealthy help all"],
    ["<b>Invisible Hand</b>", "Smith's self-interest benefiting society"],
    ["<b>Creative Destruction (History)</b>", "Schumpeter's innovation concept"],
    ["<b>Animal Spirits</b>", "Keynes's confidence concept"],
    ["<b>Rational Expectations</b>", "Using all available information"],
    ["<b>Efficient Markets (History)</b>", "Fama's market efficiency theory"],
    ["<b>Great Depression</b>", "1930s economic collapse"],
    ["<b>Great Recession</b>", "2007-2009 financial crisis"],
    ["<b>Stagflation Crisis</b>", "1970s inflation and stagnation"],
    ["<b>Dot-com Bubble</b>", "Late 1990s tech bubble"],
    ["<b>Housing Bubble</b>", "2000s real estate bubble"],
    ["<b>Tulip Mania</b>", "17th century Dutch bubble"],
    ["<b>South Sea Bubble</b>", "18th century British bubble"]
];


// Option 2: CSV string format (uncomment to use)
/*
let FLASHCARDS = `"What is the capital of France?","Paris"
"What is 2 + 2?","4"
"What is the largest planet in our solar system?","<b>Jupiter</b><br><i>It has a mass of 1.898 × 10²⁷ kg</i>"
"What year did World War II end?","1945"
"Who wrote 'Romeo and Juliet'?","William Shakespeare"
"What is HTML?","<b>HyperText Markup Language</b><br>The standard markup language for creating web pages"`;
*/
    // ========================================

    // Update page title if TOPIC is set
    if (TOPIC && TOPIC.trim() !== "") {
        document.title = "TSOFA - " + TOPIC;
    }
</script>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSOFA - The Simple, Offline Flashcard App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: #f0f0f0;
            margin: 0;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            width: 100%;
        }

        .card-counter {
            text-align: center;
            margin-bottom: 10px;
            font-size: 18px;
            color: #555;
        }

        .flashcard {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 40px;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-bottom: 20px;
            user-select: none;
            transition: transform 0.1s;
        }

        .flashcard:hover {
            transform: scale(1.02);
        }

        .flashcard:active {
            transform: scale(0.98);
        }

        .flashcard-content {
            font-size: 20px;
            line-height: 1.5;
            width: 100%;
        }

        .flashcard-content.centered {
            text-align: center;
        }

        .flashcard-content.left-aligned {
            text-align: left;
            white-space: pre-wrap;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .secondary-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr) auto auto;
            gap: 10px;
            align-items: center;
        }

        .secondary-controls button {
            font-size: 16px;
            height: 72px;
            padding: 0 16px;
        }

        .font-size-btn {
            width: 72px;
            padding: 0 !important;
        }

        .remove-btn, .undo-btn {
            background-color: #fc95a5;
        }

        .remove-btn:hover, .undo-btn:hover {
            background-color: #ff7373;
        }

        .undo-btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        .font-size-controls {
            display: flex;
            gap: 5px;
        }

        .font-size-btn {
            width: 72px;
            padding: 0 !important;
            font-size: 24px !important;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #6c757d;
        }

        .font-size-btn:hover {
            background-color: #5a6268;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 16px;
            color: #333;
            cursor: pointer;
            user-select: none;
            padding: 0 10px;
            height: 72px;
        }

        .checkbox-label input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        button {
            padding: 12px 20px;
            font-size: 20px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        button:hover {
            background-color: #0056b3;
        }

        button:active {
            transform: scale(0.95);
        }

        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        .timer-row {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }

        .timer-display {
            font-family: 'Courier New', monospace;
            font-size: 24px;
            font-weight: bold;
            color: #333;
            min-width: 120px;
            text-align: center;
        }

        .timer-btn {
            background-color: #17a2b8;
            padding: 10px 20px;
            font-size: 16px;
        }

        .timer-btn:hover {
            background-color: #138496;
        }

        .timer-btn.pause {
            background-color: #ffc107;
        }

        .timer-btn.pause:hover {
            background-color: #e0a800;
        }

        .reset-btn {
            background-color: #6c757d;
            padding: 10px 20px;
            font-size: 16px;
        }

        .reset-btn:hover {
            background-color: #5a6268;
        }

        .print-row {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .print-btn {
            background-color: #6c757d;
            padding: 10px 30px;
            font-size: 16px;
        }

        .print-btn:hover {
            background-color: #5a6268;
        }

        @media print {
            body {
                background: white;
                padding: 20px;
            }

            .container {
                display: none;
            }

            .print-table {
                display: table !important;
                width: 100%;
                border-collapse: collapse;
                font-family: Arial, sans-serif;
            }

            .print-table thead {
                display: none;
            }

            .print-table td {
                border: 1px solid #999;
                padding: 10px;
                text-align: left;
                vertical-align: top;
                width: 50%;
            }

            .print-table tr:nth-child(even) {
                background-color: #f9f9f9;
            }

            .print-header {
                display: none !important;
            }
        }

        .print-table {
            display: none;
        }

        .print-header {
            display: none;
        }

        .flip-btn {
            background-color: #28a745;
        }

        .flip-btn:hover {
            background-color: #218838;
        }

        .shuffle-btn, .invert-btn {
            background-color: #ffc107;
            color: #333;
        }

        .shuffle-btn:hover, .invert-btn:hover {
            background-color: #e0a800;
        }

        .nav-btn {
            background-color: #6c757d;
        }

        .nav-btn:hover {
            background-color: #5a6268;
        }

        .instructions {
            text-align: center;
            color: #666;
            margin-top: 20px;
            font-size: 14px;
            line-height: 1.4;
        }
    </style>
</head>
<body>
    <div class="container">

        <p style="text-align: center; color: #666; margin-top: -10px; font-size: 14px;"><a href="https://inventwithpython.com/tsofa/">TSOFA - The Simple, Offline Flashcard App by Al Sweigart</a></p>
        <h2 id="topicHeading" style="text-align: center; color: #555; margin-top: 10px; margin-bottom: 20px; display: none;"></h2>

        <div class="card-counter" id="cardCounter">Card 1 of 2</div>

        <div class="flashcard" id="flashcard" onclick="flipCard()">
            <div class="flashcard-content" id="cardContent"></div>
        </div>

        <div class="controls">
            <button onclick="goToFirst()" class="nav-btn" title="First">&#x21E4;</button>
            <button onclick="prevCard()" id="prevBtn" title="Previous (left)">&#x2190;</button>
            <button onclick="flipCard()" class="flip-btn" title="Flip (space)">&#x21BB;</button>
            <button onclick="nextCard()" id="nextBtn" title="Next (right)">&#x2192;</button>
            <button onclick="goToLast()" class="nav-btn" title="Last">&#x21E5;</button>
        </div>

        <div class="secondary-controls">
            <button onclick="shuffleCards()" class="shuffle-btn" title="Shuffle Flashcards">&#x1F500;</button>
            <button onclick="invertCards()" class="invert-btn" title="Swap Question & Answer">Q&#x2194;A</button>
            <button onclick="removeCard()" class="remove-btn" title="Remove Current Card">&#x274C;</button>
            <button onclick="undoRemove()" class="undo-btn" id="undoBtn" title="Undo Last Remove">&#x274C;&#x21BB;</button>
            <div class="font-size-controls">
                <button onclick="decreaseFontSize()" class="font-size-btn" title="Decrease font size">-&#x1F50D;</button>
                <button onclick="increaseFontSize()" class="font-size-btn" title="Increase font size">+&#x1F50D;</button>
            </div>
            <label class="checkbox-label">
                <input type="checkbox" id="centerCheckbox" checked onchange="toggleCenter()" title="Center Flashcard Text">&#x1F3AF;
            </label>
        </div>

        <div class="timer-row">
            <div class="timer-display" id="timerDisplay">00:00:00</div>
            <button onclick="toggleTimer()" class="timer-btn" id="timerBtn" title="Start Timer">&#x23F2;&#x25B6;</button>
            <button onclick="resetTimer()" class="reset-btn" title="Reset Timer">&#x23F2;&#x21BB;</button>
        </div>

        <div class="print-row">
            <button onclick="printFlashcards()" class="print-btn" title="Print">&#x1F5A8;</button>
        </div>

        <div class="instructions">
            <strong>Keyboard shortcuts:</strong> space to flip card, left/right to navigate cards

        </div>
    </div>

    <!-- Print-only content -->
    <div class="print-header" id="printHeader">
        <h2>TSOFA Flashcards</h2>
        <h3 id="printTopic"></h3>
    </div>
    <table class="print-table" id="printTable">
        <thead>
            <tr>
                <th>Question</th>
                <th>Answer</th>
            </tr>
        </thead>
        <tbody id="printTableBody">
        </tbody>
    </table>

    <script>
        // Parse CSV string to array format
        function parseCSV(csvString) {
            const rows = [];
            let currentRow = [];
            let currentField = '';
            let inQuotes = false;
            let i = 0;

            while (i < csvString.length) {
                const char = csvString[i];
                const nextChar = csvString[i + 1];

                if (!inQuotes) {
                    if (char === '"') {
                        inQuotes = true;
                    } else if (char === ',') {
                        currentRow.push(currentField);
                        currentField = '';
                    } else if (char === '\n' || (char === '\r' && nextChar === '\n')) {
                        currentRow.push(currentField);
                        if (currentRow.length > 0 && (currentRow[0] !== '' || currentRow.length > 1)) {
                            rows.push(currentRow);
                        }
                        currentRow = [];
                        currentField = '';
                        if (char === '\r' && nextChar === '\n') {
                            i++; // Skip the \n in \r\n
                        }
                    } else {
                        currentField += char;
                    }
                } else {
                    if (char === '"' && nextChar === '"') {
                        currentField += '"';
                        i++; // Skip the next quote
                    } else if (char === '"') {
                        inQuotes = false;
                    } else {
                        currentField += char;
                    }
                }
                i++;
            }

            // Handle the last field and row
            if (currentField !== '' || currentRow.length > 0) {
                currentRow.push(currentField);
                if (currentRow.length > 0 && (currentRow[0] !== '' || currentRow.length > 1)) {
                    rows.push(currentRow);
                }
            }

            // Ensure each row has exactly 2 columns (question and answer)
            return rows.map(row => {
                if (row.length === 0) return ['', ''];
                if (row.length === 1) return [row[0], ''];
                return [row[0], row[1]];
            }).filter(row => row[0] !== '' || row[1] !== ''); // Remove completely empty rows
        }

        // Process FLASHCARDS whether it's an array or CSV string
        let processedFlashcards;
        if (typeof FLASHCARDS === 'string') {
            processedFlashcards = parseCSV(FLASHCARDS);
        } else {
            processedFlashcards = FLASHCARDS;
        }

        // App state
        let currentCards = [...processedFlashcards];
        let currentIndex = 0;
        let showingQuestion = true;
        let isInverted = false;
        let currentFontSize = 20; // Default font size in pixels
        let removedCards = []; // Stack to store removed cards for undo

        // Initialize the app
        function init() {
            // Display topic if set
            if (TOPIC && TOPIC.trim() !== "") {
                const topicHeading = document.getElementById('topicHeading');
                topicHeading.textContent = "Topic: " + TOPIC;
                topicHeading.style.display = 'block';
            }

            displayCard();
            updateButtons();
            updateCounter();
            updateTextAlignment();
            updateFontSize();
            updateUndoButton();
        }

        // Display current card
        function displayCard() {
            const cardContent = document.getElementById('cardContent');
            const card = currentCards[currentIndex];

            if (!card) {
                cardContent.innerHTML = "No flashcards available";
                return;
            }

            const questionIndex = isInverted ? 1 : 0;
            const answerIndex = isInverted ? 0 : 1;

            if (showingQuestion) {
                cardContent.innerHTML = card[questionIndex];
            } else {
                cardContent.innerHTML = card[answerIndex];
            }

            // Apply centering based on checkbox
            updateTextAlignment();
        }

        // Toggle center alignment
        function toggleCenter() {
            updateTextAlignment();
        }

        // Update text alignment based on checkbox state
        function updateTextAlignment() {
            const cardContent = document.getElementById('cardContent');
            const centerCheckbox = document.getElementById('centerCheckbox');

            if (centerCheckbox.checked) {
                cardContent.classList.remove('left-aligned');
                cardContent.classList.add('centered');
            } else {
                cardContent.classList.remove('centered');
                cardContent.classList.add('left-aligned');
            }
        }

        // Increase font size
        function increaseFontSize() {
            if (currentFontSize < 48) { // Maximum font size
                currentFontSize += 4;
                updateFontSize();
            }
        }

        // Decrease font size
        function decreaseFontSize() {
            if (currentFontSize > 12) { // Minimum font size
                currentFontSize -= 4;
                updateFontSize();
            }
        }

        // Update the font size of the flashcard content
        function updateFontSize() {
            const cardContent = document.getElementById('cardContent');
            cardContent.style.fontSize = currentFontSize + 'px';
        }

        // Remove current card
        function removeCard() {
            if (currentCards.length === 0) return;

            // Store removed card with its index for undo
            removedCards.push({
                card: currentCards[currentIndex],
                index: currentIndex
            });

            // Remove card from current deck
            currentCards.splice(currentIndex, 1);

            // Adjust current index if necessary
            if (currentCards.length === 0) {
                currentIndex = 0;
            } else if (currentIndex >= currentCards.length) {
                currentIndex = currentCards.length - 1;
            }

            // Reset to question side
            showingQuestion = true;

            // Update display
            displayCard();
            updateButtons();
            updateCounter();
            updateUndoButton();
        }

        // Undo last card removal
        function undoRemove() {
            if (removedCards.length === 0) return;

            // Get the last removed card
            const lastRemoved = removedCards.pop();

            // Insert card back at its original position or at the end if position is invalid
            const insertIndex = Math.min(lastRemoved.index, currentCards.length);
            currentCards.splice(insertIndex, 0, lastRemoved.card);

            // Set current index to the restored card
            currentIndex = insertIndex;
            showingQuestion = true;

            // Update display
            displayCard();
            updateButtons();
            updateCounter();
            updateUndoButton();
        }

        // Update undo button state
        function updateUndoButton() {
            const undoBtn = document.getElementById('undoBtn');
            undoBtn.disabled = removedCards.length === 0;
        }

        // Flip the current card
        function flipCard() {
            showingQuestion = !showingQuestion;
            displayCard();
        }

        // Navigate to next card
        function nextCard() {
            if (currentIndex < currentCards.length - 1) {
                currentIndex++;
                showingQuestion = true;
                displayCard();
                updateButtons();
                updateCounter();
            }
        }

        // Navigate to previous card
        function prevCard() {
            if (currentIndex > 0) {
                currentIndex--;
                showingQuestion = true;
                displayCard();
                updateButtons();
                updateCounter();
            }
        }

        // Go to first card
        function goToFirst() {
            currentIndex = 0;
            showingQuestion = true;
            displayCard();
            updateButtons();
            updateCounter();
        }

        // Go to last card
        function goToLast() {
            currentIndex = currentCards.length - 1;
            showingQuestion = true;
            displayCard();
            updateButtons();
            updateCounter();
        }

        // Shuffle the cards
        function shuffleCards() {
            // Reset to original cards before shuffling
            currentCards = [...processedFlashcards];
            // Clear removed cards history
            removedCards = [];
            for (let i = currentCards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [currentCards[i], currentCards[j]] = [currentCards[j], currentCards[i]];
            }
            currentIndex = 0;
            showingQuestion = true;
            displayCard();
            updateButtons();
            updateCounter();
            updateUndoButton();
        }

        // Invert all cards (swap questions and answers)
        function invertCards() {
            isInverted = !isInverted;
            displayCard();
        }

        // Update button states
        function updateButtons() {
            document.getElementById('prevBtn').disabled = currentIndex === 0;
            document.getElementById('nextBtn').disabled = currentIndex === currentCards.length - 1;
        }

        // Update card counter
        function updateCounter() {
            const counter = document.getElementById('cardCounter');
            counter.textContent = `Card ${currentIndex + 1} of ${currentCards.length}`;
        }

        // Keyboard event listeners
        document.addEventListener('keydown', function(event) {
            switch(event.key) {
                case ' ':
                case 'Spacebar':
                    event.preventDefault();
                    flipCard();
                    break;
                case 'ArrowLeft':
                    event.preventDefault();
                    prevCard();
                    break;
                case 'ArrowRight':
                    event.preventDefault();
                    nextCard();
                    break;
            }
        });

        // Timer variables
        let timerStartTime = 0;
        let timerElapsedTime = 0;
        let timerInterval = null;
        let isTimerRunning = false;

        // Format time as HH:MM:SS
        function formatTime(milliseconds) {
            const totalSeconds = Math.floor(milliseconds / 1000);
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;

            return String(hours).padStart(2, '0') + ':' +
                   String(minutes).padStart(2, '0') + ':' +
                   String(seconds).padStart(2, '0');
        }

        // Update timer display
        function updateTimerDisplay() {
            const currentTime = isTimerRunning ?
                timerElapsedTime + (Date.now() - timerStartTime) :
                timerElapsedTime;
            document.getElementById('timerDisplay').textContent = formatTime(currentTime);
        }

        // Toggle timer (start/pause)
        function toggleTimer() {
            const timerBtn = document.getElementById('timerBtn');

            if (isTimerRunning) {
                // Pause timer
                clearInterval(timerInterval);
                timerElapsedTime += Date.now() - timerStartTime;
                isTimerRunning = false;
                timerBtn.innerHTML  = '&#x23F2;&#x25B6;';
                timerBtn.classList.remove('pause');
            } else {
                // Start timer
                timerStartTime = Date.now();
                isTimerRunning = true;
                timerBtn.innerHTML = '&#x23F2;&#x23F8;';
                timerBtn.classList.add('pause');

                // Update display every second
                timerInterval = setInterval(updateTimerDisplay, 1000);
            }
        }

        // Reset timer
        function resetTimer() {
            clearInterval(timerInterval);
            timerStartTime = 0;
            timerElapsedTime = 0;
            isTimerRunning = false;

            const timerBtn = document.getElementById('timerBtn');
            timerBtn.innerHTML  = '&#x23F2;&#x25B6;';
            timerBtn.classList.remove('pause');

            updateTimerDisplay();
        }

        // Print flashcards function
        function printFlashcards() {
            // Clear any existing content
            const printTableBody = document.getElementById('printTableBody');
            printTableBody.innerHTML = '';

            // Use the original flashcards (not affected by current state or invert)
            processedFlashcards.forEach((card, index) => {
                const row = document.createElement('tr');

                const questionCell = document.createElement('td');
                questionCell.innerHTML = card[0]; // Always use original order

                const answerCell = document.createElement('td');
                answerCell.innerHTML = card[1]; // Always use original order

                row.appendChild(questionCell);
                row.appendChild(answerCell);
                printTableBody.appendChild(row);
            });

            // Trigger print dialog
            window.print();
        }
        
        // Initialize app when page loads
        window.onload = init;
    </script>
</body>
</html>